<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>RiskPlay Phaser</title>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.js"></script>
<style>
body {
    margin:0;
    background:#0d0221;
}
</style>
</head>
<body>

<script>
let balance = 1000;
let tickets = 0;

class SlotScene extends Phaser.Scene {
    constructor() { super("SlotScene"); }

    create() {
        this.add.text(20,20,"Balance: "+balance,{fontSize:"20px",color:"#00f2ff"});
        this.balanceText = this.add.text(20,20,"Balance: "+balance,{fontSize:"20px",color:"#00f2ff"});

        this.ticketText = this.add.text(20,50,"Tickets: "+tickets,{fontSize:"20px",color:"#8a2be2"});

        this.reels = [];
        for(let i=0;i<3;i++){
            let reel = this.add.text(200+i*100,200,"‚ùì",{fontSize:"60px"});
            this.reels.push(reel);
        }

        let spinBtn = this.add.text(250,350,"SPIN (50)",{
            fontSize:"28px",
            backgroundColor:"#00f2ff",
            padding:10
        }).setInteractive();

        spinBtn.on("pointerdown",()=>this.spin());

        let arenaBtn = this.add.text(250,420,"GO ARENA",{
            fontSize:"24px",
            backgroundColor:"#8a2be2",
            padding:10
        }).setInteractive();

        arenaBtn.on("pointerdown",()=>{
            this.scene.start("ArenaScene");
        });
    }

    spin(){
        if(balance<50) return;

        balance-=50;

        let symbols=["üí∞","‚ö°","üéü","üíé","‚≠ê"];
        this.reels.forEach((reel,i)=>{
            this.tweens.add({
                targets:reel,
                y: 300,
                duration:300,
                yoyo:true,
                repeat:5,
                onComplete:()=>{
                    let sym=symbols[Math.floor(Math.random()*symbols.length)];
                    reel.setText(sym);

                    if(sym==="üí∞") balance+=100;
                    if(sym==="‚ö°") balance+=50;
                    if(sym==="üéü") tickets+=1;
                    if(sym==="üíé") balance+=500;
                    if(sym==="‚≠ê") balance+=200;

                    this.balanceText.setText("Balance: "+balance);
                    this.ticketText.setText("Tickets: "+tickets);
                }
            });
        });
    }
}

class ArenaScene extends Phaser.Scene {
    constructor(){ super("ArenaScene"); }

    create(){
        this.score=0;
        this.timeLeft=20;

        this.add.text(20,20,"Arena Mode",{fontSize:"24px",color:"#00f2ff"});

        this.scoreText=this.add.text(20,60,"Score: 0",{fontSize:"20px"});
        this.timeText=this.add.text(20,90,"Time: 20",{fontSize:"20px"});

        if(tickets<1){
            this.add.text(200,300,"NO TICKET!",{fontSize:"32px",color:"red"});
            return;
        }

        tickets--;

        this.target=this.add.circle(400,300,30,0xff0000);
        this.head=this.add.circle(400,300,10,0xffff00);

        this.target.setInteractive();

        this.target.on("pointerdown",(pointer)=>{
            let dist = Phaser.Math.Distance.Between(pointer.x,pointer.y,this.target.x,this.target.y);

            let points = dist<10?2:1;
            this.score+=points;
            this.scoreText.setText("Score: "+this.score);

            this.spawnTarget();
        });

        this.spawnTarget();

        this.timeEvent=this.time.addEvent({
            delay:1000,
            callback:()=>{
                this.timeLeft--;
                this.timeText.setText("Time: "+this.timeLeft);
                if(this.timeLeft<=0){
                    this.endGame();
                }
            },
            loop:true
        });

        let backBtn=this.add.text(20,550,"BACK",{fontSize:"20px",backgroundColor:"#8a2be2"}).setInteractive();
        backBtn.on("pointerdown",()=>this.scene.start("SlotScene"));
    }

    spawnTarget(){
        let x=Phaser.Math.Between(200,600);
        let y=Phaser.Math.Between(150,450);

        this.tweens.add({
            targets:this.target,
            x:x,
            y:y,
            duration:300
        });

        this.tweens.add({
            targets:this.head,
            x:x,
            y:y,
            duration:300
        });
    }

    endGame(){
        balance+=this.score*40;
        this.scene.start("SlotScene");
    }
}

const config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    backgroundColor:"#0d0221",
    scene:[SlotScene,ArenaScene]
};

new Phaser.Game(config);
</script>

</body>
</html>
