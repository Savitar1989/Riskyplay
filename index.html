<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>RiskPlay Pro</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body{
    margin:0;
    font-family:Arial;
    background:radial-gradient(circle at top,#1b0033,#000);
    color:white;
    text-align:center;
    overflow:hidden;
}
h1{margin:10px;font-size:26px;}

.panel{
    background:#1c1c3c;
    margin:10px;
    padding:15px;
    border-radius:15px;
    box-shadow:0 0 25px #8a2be288;
}

button{
    padding:12px 20px;
    border:none;
    border-radius:12px;
    background:linear-gradient(45deg,#00f2ff,#8a2be2);
    color:white;
    font-size:16px;
    cursor:pointer;
}

.slot-container{
    display:flex;
    justify-content:center;
    gap:10px;
    margin:15px;
}

.reel{
    width:70px;
    height:70px;
    background:#000;
    border:2px solid #00f2ff;
    border-radius:10px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:35px;
    box-shadow:0 0 15px #00f2ff66;
}

.win-popup{
    position:absolute;
    top:40%;
    width:100%;
    font-size:32px;
    font-weight:bold;
    animation:pop 1s ease forwards;
    text-shadow:0 0 15px gold;
}

@keyframes pop{
    0%{transform:scale(0.5);opacity:0;}
    50%{transform:scale(1.3);}
    100%{transform:scale(1);opacity:1;}
}

canvas{
    background:black;
    border-radius:10px;
    margin-top:10px;
}

.hidden{display:none;}

.timebar{
    height:10px;
    background:lime;
    margin:5px auto;
    width:300px;
}
</style>
</head>
<body>

<h1>üé∞ RiskPlay Pro</h1>

<div class="panel">
Balance: <span id="balance">1000</span> |
Tickets: <span id="tickets">0</span>
</div>

<div class="panel">
<div class="slot-container">
<div class="reel" id="r1">‚ùì</div>
<div class="reel" id="r2">‚ùì</div>
<div class="reel" id="r3">‚ùì</div>
</div>
<button onclick="spin()">Spin (50)</button>
</div>

<div class="panel">
<button onclick="startArena()">Enter Arena (1 Ticket)</button>
<div id="arenaContainer" class="hidden">
<div class="timebar" id="timebar"></div>
<canvas id="arena" width="300" height="400"></canvas>
<div>Score: <span id="score">0</span> | Combo: <span id="combo">0</span></div>
</div>
</div>

<script>
let balance=1000;
let tickets=0;
let symbols=["üí∞","‚ö°","üéü","‚≠ê","üíé"];

function updateUI(){
    document.getElementById("balance").innerText=balance;
    document.getElementById("tickets").innerText=tickets;
}

function spin(){
    if(balance<50){alert("No balance");return;}
    balance-=50;
    updateUI();

    let reels=[r1,r2,r3];
    reels.forEach(r=>{
        let spins=15+Math.random()*10;
        let interval=setInterval(()=>{
            r.innerText=symbols[Math.floor(Math.random()*symbols.length)];
            spins--;
            if(spins<=0) clearInterval(interval);
        },80);
    });

    setTimeout(()=>{
        let results=reels.map(r=>r.innerText);
        let win=0;

        results.forEach(sym=>{
            if(sym==="üí∞") win+=100;
            if(sym==="‚ö°") win+=50;
            if(sym==="üéü") tickets+=1;
            if(sym==="‚≠ê") win+=200;
            if(sym==="üíé") win+=500;
        });

        balance+=win;
        updateUI();

        if(win>=500) showPopup("üî• JACKPOT üî•");
        else if(win>=200) showPopup("üí• BIG WIN üí•");
        else if(win>0) showPopup("WIN +" + win);
    },1500);
}

function showPopup(text){
    let div=document.createElement("div");
    div.className="win-popup";
    div.innerText=text;
    document.body.appendChild(div);
    setTimeout(()=>div.remove(),1000);
}

//////////////////// ARENA /////////////////////

let canvas=document.getElementById("arena");
let ctx=canvas.getContext("2d");
let score=0;
let combo=0;
let timeLeft=20;
let target;

function startArena(){
    if(tickets<1){alert("No ticket");return;}
    tickets--;
    updateUI();

    document.getElementById("arenaContainer").classList.remove("hidden");

    score=0;
    combo=0;
    timeLeft=20;

    spawnTarget();

    let timer=setInterval(()=>{
        timeLeft--;
        document.getElementById("timebar").style.width=(timeLeft/20*300)+"px";
        if(timeLeft<=0){
            clearInterval(timer);
            endArena();
        }
    },1000);
}

function spawnTarget(){
    target={
        x:Math.random()*260+20,
        y:Math.random()*360+20,
        r:25,
        vx:(Math.random()-0.5)*4,
        vy:(Math.random()-0.5)*4
    };
}

canvas.addEventListener("click",function(e){
    let rect=canvas.getBoundingClientRect();
    let mx=e.clientX-rect.left;
    let my=e.clientY-rect.top;

    let dist=Math.sqrt((mx-target.x)**2+(my-target.y)**2);

    if(dist<target.r){
        let headshot=dist<10;
        let points=headshot?2:1;

        score+=points;
        combo++;
        document.getElementById("score").innerText=score;
        document.getElementById("combo").innerText=combo;

        spawnTarget();
    } else {
        combo=0;
        document.getElementById("combo").innerText=combo;
    }
});

function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    target.x+=target.vx;
    target.y+=target.vy;

    if(target.x<20||target.x>280) target.vx*=-1;
    if(target.y<20||target.y>380) target.vy*=-1;

    ctx.beginPath();
    ctx.arc(target.x,target.y,target.r,0,Math.PI*2);
    ctx.fillStyle="red";
    ctx.fill();

    ctx.beginPath();
    ctx.arc(target.x,target.y,10,0,Math.PI*2);
    ctx.fillStyle="yellow";
    ctx.fill();

    requestAnimationFrame(draw);
}

spawnTarget();
draw();

function endArena(){
    showPopup("Arena Finished!");
    balance+=score*40;
    updateUI();
}
</script>

</body>
</html>
