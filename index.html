<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>RiskPlay Arena</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body{
    margin:0;
    font-family:Arial;
    background:linear-gradient(135deg,#0f0f1f,#1a0033);
    color:white;
    text-align:center;
    overflow:hidden;
}
h1{margin:10px;}
.panel{
    background:#1f1f3a;
    border-radius:15px;
    padding:15px;
    margin:10px;
    box-shadow:0 0 20px #00f2ff55;
}
button{
    padding:12px 20px;
    margin:5px;
    font-size:16px;
    border:none;
    border-radius:10px;
    background:linear-gradient(45deg,#00f2ff,#8a2be2);
    color:white;
    cursor:pointer;
}
.slot{
    font-size:40px;
    letter-spacing:10px;
    margin:15px;
}
canvas{
    background:#000;
    border:2px solid #00f2ff;
    border-radius:10px;
}
.hidden{display:none;}
</style>
</head>
<body>

<h1>ğŸ° RiskPlay</h1>

<div class="panel">
Balance: <span id="balance">1000</span> ğŸ’° |
Tickets: <span id="tickets">0</span> ğŸŸ
</div>

<div class="panel">
<div class="slot" id="slot">â“ â“ â“</div>
<button onclick="spin()">Spin (50)</button>
</div>

<div class="panel">
<button onclick="startArena()">Enter Arena (1 Ticket)</button>
<div id="arenaContainer" class="hidden">
<canvas id="arena" width="300" height="400"></canvas>
<div>Score: <span id="score">0</span></div>
</div>
</div>

<script>
let balance=1000;
let tickets=0;

const symbols=["ğŸ’°","âš¡","ğŸŸ","âŒ","â­"];
const slotDiv=document.getElementById("slot");

function updateUI(){
    document.getElementById("balance").innerText=balance;
    document.getElementById("tickets").innerText=tickets;
}

function spin(){
    if(balance<50){alert("No balance");return;}
    balance-=50;

    let result=[];
    for(let i=0;i<3;i++){
        result.push(symbols[Math.floor(Math.random()*symbols.length)]);
    }

    slotDiv.innerText=result.join(" ");

    result.forEach(sym=>{
        if(sym==="ğŸ’°") balance+=100;
        if(sym==="âš¡") balance+=50;
        if(sym==="ğŸŸ") tickets+=1;
        if(sym==="â­") balance+=200;
    });

    updateUI();
}

//////////////// ARENA ////////////////////

let canvas=document.getElementById("arena");
let ctx=canvas.getContext("2d");
let target={x:150,y:200,r:20};
let score=0;
let timeLeft=15;
let arenaInterval;

function startArena(){
    if(tickets<1){alert("No ticket");return;}
    tickets--;
    updateUI();

    document.getElementById("arenaContainer").classList.remove("hidden");
    score=0;
    timeLeft=15;
    document.getElementById("score").innerText=score;

    arenaInterval=setInterval(()=>{
        timeLeft--;
        if(timeLeft<=0) endArena();
    },1000);

    spawnTarget();
}

function spawnTarget(){
    target.x=Math.random()*260+20;
    target.y=Math.random()*360+20;
}

canvas.addEventListener("click",function(e){
    let rect=canvas.getBoundingClientRect();
    let mx=e.clientX-rect.left;
    let my=e.clientY-rect.top;

    let dist=Math.sqrt((mx-target.x)**2+(my-target.y)**2);
    if(dist<target.r){
        score++;
        document.getElementById("score").innerText=score;
        spawnTarget();
    }
});

function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    ctx.fillStyle="red";
    ctx.beginPath();
    ctx.arc(target.x,target.y,target.r,0,Math.PI*2);
    ctx.fill();

    ctx.strokeStyle="lime";
    ctx.beginPath();
    ctx.moveTo(target.x-15,target.y);
    ctx.lineTo(target.x+15,target.y);
    ctx.moveTo(target.x,target.y-15);
    ctx.lineTo(target.x,target.y+15);
    ctx.stroke();

    requestAnimationFrame(draw);
}
draw();

function endArena(){
    clearInterval(arenaInterval);
    alert("Arena finished! Score: "+score);
    balance+=score*50;
    updateUI();
}

updateUI();
</script>
</body>
</html>
